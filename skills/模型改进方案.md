# 模型改进方案 (Model Improvement Plan)

## 1. 核心目标
针对火后滑坡“静态背景与动态扰动高度耦合”及“传统模型缺乏物理约束”的痛点，构建 **DSO-GCN (Dual-Stream Orthogonal GCN)** 预测模型与 **PCCE (Physically-Constrained Causal Explainer)** 解释框架，实现对滑坡致灾机理的**因果解耦**与**物理归因**。

## 2. 改进模块详解

### 2.1 模块一：DSO-GCN 模型架构 (Prediction Model)

**命名**：Dual-Stream Orthogonal Graph Convolutional Network
**解决问题**：
1.  **特征纠缠**：静态地形（如陡坡）往往与高火烈度区重叠，传统单流 GCN 倾向于利用容易学习的地形特征“掩盖”火灾的真实贡献。
2.  **多重共线性**：导致难以量化火灾因子的独立增量风险。

**详细设计**：
*   **双流编码器 (Dual-Stream Encoder)**：
    *   **Static Stream**: 输入仅包含地形、岩性、水文等静态背景因子 ($X_S$)，提取 $H_S$。
    *   **Dynamic Stream**: 输入仅包含 dNBR, dNDVI 等火灾扰动因子 ($X_D$)，提取 $H_D$。
    *   *数学表达*：$H^{(l+1)}_S = \sigma(\tilde{A} H^{(l)}_S W_S), \quad H^{(l+1)}_D = \sigma(\tilde{A} H^{(l)}_D W_D)$
*   **正交正则化 (Orthogonal Regularization)**：
    *   在 Loss 中增加惩罚项，强制两路特征在潜在空间相互垂直。
    *   *公式*：$L_{orth} = \frac{1}{N^2} \| H_S^T H_D \|_F^2$
    *   *作用*：从数学上保证动态流学到的特征与静态背景线性无关，即提取的是“纯净”的火灾效应。
*   **融合预测**：
    *   $\\hat{Y} = \text{MLP}([H_S \parallel H_D])$

### 2.2 模块二：属性辅助图构建 (Graph Construction)

**解决问题**：传统 KNN 仅基于欧氏距离建图，忽略了地质环境的非平稳性，导致噪声在异质单元间错误传播。

**详细设计**：
*   **混合距离度量**：
    *   $A_{ij} = \alpha \cdot A_{spatial} + (1-\alpha) \cdot A_{feature}$
    *   $A_{spatial}$: 基于重心距离的高斯核函数。
    *   $A_{feature}$: 基于静态特征 ($X_S$) 的余弦相似度。
*   **作用**：确保消息传递优先发生在“空间相邻且孕灾环境相似”的单元之间（Homophily Enforcement）。

### 2.3 模块三：PCCE 解释框架 (Explanation Framework)

**命名**：Physically-Constrained Causal Explainer
**解决问题**：
1.  **违背物理**：传统解释器基于统计相关性，可能识别出“下游导致上游滑坡”的虚假连接。
2.  **缺乏因果**：无法回答“如果没有火灾会怎样”。

**详细设计**：
*   **水文流向掩码 (Hydrological Flow Mask)**：
    *   基于 DEM 计算相对高差 $\\Delta h_{ij}$。
    *   构建硬约束掩码 $M_{flow}$：仅允许 $\\Delta h_{ij} > 0$（上游流向下游）的边存在。
    *   解释优化：$M_{final} = M_{edge} \odot M_{flow}$
*   **反事实概率下降 (CPD)**：
    *   通过干预手段（Intervention）量化因果效应。
    *   $CPD = P(y|x_S, x_D) - P(y|x_S, x_D=\\mathbf{0})$
    *   *判据*：若 $CPD \gg 0$，则判定为“动态诱发型”滑坡。

## 3. 实现路线图 (Implementation Roadmap)

1.  **数据适配 (`adapter.py`)** [已规划]
    *   实现特征自动分组 ($X \to X_S, X_D$)。
    *   实现属性辅助建图 (Cosine Similarity)。
2.  **模型重构 (`models.py`)** [核心]
    *   开发 `DSOGcnEncoderNode` 类。
    *   实现双流卷积层与 Orthogonal Loss。
3.  **解释器增强 (`explain.py`)** [创新]
    *   引入 $M_{flow}$ 物理掩码约束。
    *   开发 CPD 计算模块。
4.  **验证实验**
    *   消融实验 (w/o Orthogonality, w/o Dual-Stream)。
    *   机理验证 (DSI vs InSAR Rate)。